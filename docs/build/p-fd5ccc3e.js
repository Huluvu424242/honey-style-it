function t(t){return"function"==typeof t}function n(t){const n=t((t=>{Error.call(t),t.stack=(new Error).stack}));return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const r=n((t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map(((t,n)=>`${n+1}) ${t.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n}));function e(t,n){if(t){const r=t.indexOf(n);0<=r&&t.splice(r,1)}}class s{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const t of e)t.remove(this);else e.remove(this);const{initialTeardown:s}=this;if(t(s))try{s()}catch(t){n=t instanceof r?t.errors:[t]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const t of i)try{c(t)}catch(t){n=null!=n?n:[],t instanceof r?n=[...n,...t.errors]:n.push(t)}}if(n)throw new r(n)}}add(t){var n;if(t&&t!==this)if(this.closed)c(t);else{if(t instanceof s){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&e(n,t)}remove(t){const{_finalizers:n}=this;n&&e(n,t),t instanceof s&&t._removeParent(this)}}s.EMPTY=(()=>{const t=new s;return t.closed=!0,t})();const i=s.EMPTY;function o(n){return n instanceof s||n&&"closed"in n&&t(n.remove)&&t(n.add)&&t(n.unsubscribe)}function c(n){t(n)?n():n.unsubscribe()}const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},h={setTimeout(t,n,...r){const{delegate:e}=h;return(null==e?void 0:e.setTimeout)?e.setTimeout(t,n,...r):setTimeout(t,n,...r)},clearTimeout(t){const{delegate:n}=h;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function l(){}const a=f("C",void 0,void 0);function f(t,n,r){return{kind:t,value:n,error:r}}function d(t){t()}class p extends s{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,o(t)&&t.add(this)):this.destination=x}static create(t,n,r){return new m(t,n,r)}next(t){this.isStopped?_(function(t){return f("N",t,void 0)}(t),this):this._next(t)}error(t){this.isStopped?_(f("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?_(a,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const v=Function.prototype.bind;function b(t,n){return v.call(t,n)}class y{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(t){w(t)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(t){w(t)}else w(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(t){w(t)}}}class m extends p{constructor(n,r,e){let s;if(super(),t(n)||!n)s={next:null!=n?n:void 0,error:null!=r?r:void 0,complete:null!=e?e:void 0};else{let t;this&&u.useDeprecatedNextContext?(t=Object.create(n),t.unsubscribe=()=>this.unsubscribe(),s={next:n.next&&b(n.next,t),error:n.error&&b(n.error,t),complete:n.complete&&b(n.complete,t)}):s=n}this.destination=new y(s)}}function w(t){var n;n=t,h.setTimeout((()=>{const{onUnhandledError:t}=u;if(!t)throw n;t(n)}))}function _(t,n){const{onStoppedNotification:r}=u;r&&h.setTimeout((()=>r(t,n)))}const x={closed:!0,next:l,error:function(t){throw t},complete:l},E="function"==typeof Symbol&&Symbol.observable||"@@observable";function g(t){return t}class S{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new S;return n.source=this,n.operator=t,n}subscribe(n,r,e){const s=(i=n)&&i instanceof p||function(n){return n&&t(n.next)&&t(n.error)&&t(n.complete)}(i)&&o(i)?n:new m(n,r,e);var i;return d((()=>{const{operator:t,source:n}=this;s.add(t?t.call(s,n):n?this._subscribe(s):this._trySubscribe(s))})),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=O(n))(((n,r)=>{const e=new m({next:n=>{try{t(n)}catch(t){r(t),e.unsubscribe()}},error:r,complete:n});this.subscribe(e)}))}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[E](){return this}pipe(...t){return(0===(n=t).length?g:1===n.length?n[0]:function(t){return n.reduce(((t,n)=>n(t)),t)})(this);var n}toPromise(t){return new(t=O(t))(((t,n)=>{let r;this.subscribe((t=>r=t),(t=>n(t)),(()=>t(r)))}))}}function O(t){var n;return null!==(n=null!=t?t:u.Promise)&&void 0!==n?n:Promise}S.create=t=>new S(t);const P=new S((t=>t.complete()));export{i as E,S as O,s as S,e as a,P as b,n as c,d as e}